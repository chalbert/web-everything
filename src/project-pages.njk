---
pagination:
    data: projects
    size: 1
    alias: project
permalink: "projects/{{ project.id }}/"
layout: base.njk
mainClass: "project-page-container"
eleventyComputed:
    title: "Web Everything - {{ project.name }}"
---

{% from "project-status.njk" import projectStatus %}

<div class="project-detail-header">
    <div class="project-detail-icon">
        {% if project.isSvg %}
            <img src="{{ project.icon }}" alt="{{ project.name }} icon" width="64" height="64">
        {% else %}
            {{ project.icon }}
        {% endif %}
    </div>
    <h1 class="project-detail-title">{{ project.name }}</h1>
    <p class="project-detail-desc">{{ project.description | safe }}</p>
    
    <div class="project-detail-status">
        <!-- Status Link -->
        <a href="/project-lifecycle/" class="status-lifecycle-link" aria-label="Learn about the project lifestyle stages">
            {{ projectStatus(project.status) }}
        </a>
    </div>
</div>

<div class="project-layout">
    <aside class="project-sidebar">
        <div class="toc-container">
            <h3 id="table-of-contents">Table of Contents</h3>
            <nav class="toc">
                <!-- Tocbot will inject content here -->
            </nav>
        </div>
        <div class="action-area" style="margin-top: 2rem;">
            <a href="/" class="btn-back">
                &larr; Back to Home
            </a>
        </div>
    </aside>

    <div class="project-body">
{% include "project-" + project.id + ".njk" ignore missing %}
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.21.0/tocbot.min.js"></script>
<script>
    // Initialize Tocbot
    tocbot.init({
        tocSelector: '.toc',
        contentSelector: '.project-body',
        headingSelector: 'h3, h4:not(.no-toc)',
        hasInnerContainers: true,
        scrollSmooth: true,
        scrollSmoothDuration: 400,
        scrollSmoothOffset: -120, // Increased to account for header + spacing
        headingsOffset: 120,      // improved intersection detection
    });
</script>
