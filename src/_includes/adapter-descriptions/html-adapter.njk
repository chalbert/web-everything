<h2>HTML Adapter</h2>
<p>
    HTML is the <strong>canonical format</strong> for Web Everything. All other adapters (JSX, Template Strings) compile to these HTML primitives.
    The HTML Adapter documents the standard syntax and serves as the reference for interconvertibility.
</p>

<section class="section-card">
    <h3 id="why-canonical">Why HTML is Canonical</h3>
    <ul>
        <li><strong>Universal Runtime:</strong> HTML runs natively in every browser without compilation.</li>
        <li><strong>Server-Side Friendly:</strong> Can be generated by any backend language.</li>
        <li><strong>Progressive Enhancement:</strong> Works without JavaScript; Web Everything enhances it.</li>
        <li><strong>Stable Target:</strong> Other formats compile to HTML—it's the lowest common denominator.</li>
    </ul>
</section>

<section class="section-card">
    <h3 id="custom-elements">Custom Elements</h3>
    <p>Components are standard Custom Elements:</p>

    {% highlight "html" %}
<!-- Definition -->
<script type="module">
    class UserCard extends HTMLElement {
        static observedAttributes = ['name', 'avatar'];

        connectedCallback() {
            this.attachShadow({ mode: 'open' });
            this.render();
        }

        attributeChangedCallback() {
            this.render();
        }

        render() {
            this.shadowRoot.innerHTML = `
                <div class="user-card">
                    <img src="${this.getAttribute('avatar')}" />
                    <span>${this.getAttribute('name')}</span>
                </div>
            `;
        }
    }
    customElements.define('user-card', UserCard);
</script>

<!-- Usage -->
<user-card name="Alice" avatar="/avatars/alice.jpg"></user-card>
    {% endhighlight %}
</section>

<section class="section-card">
    <h3 id="declarative-shadow-dom">Declarative Shadow DOM</h3>
    <p>Server-rendered components with shadow DOM:</p>

    {% highlight "html" %}
<user-card name="Alice">
    <template shadowrootmode="open">
        <style>
            .user-card { display: flex; gap: 1rem; }
        </style>
        <div class="user-card">
            <img src="/avatars/alice.jpg" alt="Alice" />
            <span>Alice</span>
        </div>
    </template>
</user-card>
    {% endhighlight %}
</section>

<section class="section-card">
    <h3 id="directives">Directives</h3>
    <p>Web Directives use two syntaxes depending on complexity:</p>

    <h4 id="simple-directives">Simple Directives (Single Template)</h4>
    <p>Use <code>&lt;template is="directive-name"&gt;</code>:</p>
    {% highlight "html" %}
<!-- For Each -->
<template is="for-each" items="users" key="id">
    <div class="user-row">
        <span data-bind="name"></span>
    </div>
</template>

<!-- Conditional -->
<template is="if" condition="isLoggedIn">
    <user-menu></user-menu>
</template>
    {% endhighlight %}

    <h4 id="complex-directives">Complex Directives (Multiple Templates)</h4>
    <p>Use comment syntax for directives with multiple slots:</p>
    {% highlight "html" %}
<!-- resource:loader source="userQuery" -->
    <template slot="loading">
        <skeleton-card></skeleton-card>
    </template>
    <template slot="success">
        <user-profile data-bind="data"></user-profile>
    </template>
    <template slot="error">
        <error-card data-bind="error.message"></error-card>
    </template>
    <template slot="empty">
        <empty-state></empty-state>
    </template>
<!-- /resource:loader -->
    {% endhighlight %}
</section>

<section class="section-card">
    <h3 id="behaviors">Behaviors</h3>
    <p>Web Behaviors are hyphenated attributes on any element:</p>

    {% highlight "html" %}
<!-- Router link behavior -->
<a href="/dashboard" history-link>Dashboard</a>

<!-- Multiple behaviors compose -->
<button
    history-link="/profile"
    click-outside="closeMenu"
    trusted-html="sanitize"
>
    Profile
</button>

<!-- Behaviors on non-standard elements -->
<div draggable-item drop-zone="kanban">
    Task Card
</div>
    {% endhighlight %}
</section>

<section class="section-card">
    <h3 id="events">Event Handling</h3>
    <p>The <code>on:*</code> attribute pattern for declarative events:</p>

    {% highlight "html" %}
<!-- Basic event -->
<button on:click="handleClick">Submit</button>

<!-- With modifiers -->
<input on:keydown.enter="handleSubmit" />
<button on:click.once="handleFirstClick">First Only</button>
<form on:submit.prevent="handleSubmit">...</form>

<!-- With arguments -->
<button on:click="deleteItem" arg-id="123">Delete</button>
    {% endhighlight %}
</section>

<section class="section-card">
    <h3 id="data-binding">Data Binding</h3>
    <p>The <code>data-bind</code> attribute for reactive content:</p>

    {% highlight "html" %}
<!-- Text content binding -->
<span data-bind="user.name"></span>

<!-- Attribute binding -->
<img data-bind-src="user.avatar" data-bind-alt="user.name" />

<!-- Two-way binding on inputs -->
<input type="text" data-bind="formData.email" />

<!-- Computed expressions -->
<span data-bind="items.length + ' items'"></span>
    {% endhighlight %}
</section>

<section class="section-card">
    <h3 id="slots">Slots &amp; Content Projection</h3>
    <p>Standard slot mechanism for content distribution:</p>

    {% highlight "html" %}
<!-- Component definition with slots -->
<template id="card-template">
    <div class="card">
        <header><slot name="header"></slot></header>
        <main><slot></slot></main>
        <footer><slot name="footer"></slot></footer>
    </div>
</template>

<!-- Usage with named slots -->
<card-element>
    <span slot="header">Card Title</span>
    <p>Main content goes here.</p>
    <button slot="footer">Action</button>
</card-element>
    {% endhighlight %}
</section>

<section class="section-card">
    <h3 id="security">Security Attributes</h3>
    <p>Trusted Types enforcement via behaviors:</p>

    {% highlight "html" %}
<!-- Zone-based enforcement (directive) -->
<!-- trusted:html policy="user-content" -->
    <div class="user-generated-content">
        <!-- All innerHTML here goes through policy -->
    </div>
<!-- /trusted:html -->

<!-- Element-based enforcement (behavior) -->
<div trusted-html="sanitize-policy">
    User content here
</div>

<!-- Strict mode (throws on raw strings) -->
<div trusted-html="admin-policy" trusted-html-strict>
    Admin content
</div>
    {% endhighlight %}
</section>

<section class="section-card">
    <h3 id="ast-transformation">AST Transformation</h3>
    <p>HTML serves as the transformation hub for all formats:</p>

    {% highlight "typescript" %}
import { parseHtml, htmlToJsx, htmlToTemplate } from '@web-adapters/html';

// Parse HTML to AST
const htmlAst = parseHtml(`
    <template is="for-each" items="users">
        <div data-bind="name"></div>
    </template>
`);

// Convert to JSX
const jsxCode = htmlToJsx(htmlAst, {
    componentCase: 'PascalCase',
    generateTypes: true
});

// Convert to Template String
const templateCode = htmlToTemplate(htmlAst, {
    tagName: 'html'
});
    {% endhighlight %}
</section>

<section class="section-card">
    <h3 id="related">Related</h3>
    <ul style="margin-bottom: 0;">
        <li><a href="/adapters/jsx-adapter/">JSX Adapter</a> — JSX/TSX alternative syntax</li>
        <li><a href="/adapters/template-string-adapter/">Template String Adapter</a> — Tagged template literals</li>
        <li><a href="/projects/webdirectives/">Web Directives</a> — Structural directives documentation</li>
        <li><a href="/projects/webbehaviors/">Web Behaviors</a> — Custom attribute behaviors</li>
        <li><a href="/projects/webplugs/">Web Plugs</a> — Runtime infrastructure</li>
    </ul>
</section>
