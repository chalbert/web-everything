{% from "mode-selector.njk" import pluggedContent, unpluggedContent, comparisonContent, endContent %}

<h3 id="overview">Overview</h3>
<p>
    <strong>CustomStoreRegistry</strong> is a registry for state management stores, enabling reactive data flow patterns.
</p>

<h3 id="status">Status</h3>
<p class="text-sm text-gray-600 mb-4">
    <strong>Concept Phase:</strong> The API and implementation are still being designed.
</p>

<h3 id="tentative-interface">Tentative Interface</h3>
{% highlight "typescript" %}
interface CustomStoreRegistry extends HTMLRegistry<
    StoreDefinition,
    ImplementedStore
> {
    readonly localName = 'customStores';

    define(name: string, Store: ImplementedStore): void;
}
{% endhighlight %}

<h3 id="intended-use">Intended Use Cases</h3>
<ul class="list-disc ml-5 mb-4 text-sm text-gray-600">
    <li>Global application state management</li>
    <li>Scoped state containers</li>
    <li>Reactive data subscriptions</li>
</ul>

<h3 id="usage-example">Proposed Usage</h3>

{{ pluggedContent("store-reg-example", code=true) }}
{% highlight "javascript" %}
// Define a store (proposed API)
class UserStore extends CustomStore {
    state = { user: null };

    setUser(user) {
        this.state.user = user;
        this.notify();
    }
}

// Register globally
customStores.define('user', UserStore);
{% endhighlight %}

{{ unpluggedContent("store-reg-example", code=true) }}
{% highlight "javascript" %}
consume {
  CustomStore,
  customStores
} of '@web-states';

// Define a store (proposed API)
class UserStore extends CustomStore {
    state = { user: null };

    setUser(user) {
        this.state.user = user;
        this.notify();
    }
}

// Register via consumed registry
customStores.define('user', UserStore);
{% endhighlight %}

{{ comparisonContent("store-reg-example", code=true) }}
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0;">
    <div>
        <div style="font-size: 0.7rem; font-weight: 600; color: #059669; padding: 0.5rem 1rem; text-transform: uppercase; letter-spacing: 0.05em; background: #f0fdf4; border-bottom: 1px solid #e5e7eb;">Plugged</div>
{% highlight "javascript" %}
// Global registry (proposed)
customStores.define(
  'user', UserStore
);
{% endhighlight %}
    </div>
    <div style="border-left: 1px solid #e5e7eb;">
        <div style="font-size: 0.7rem; font-weight: 600; color: #475569; padding: 0.5rem 1rem; text-transform: uppercase; letter-spacing: 0.05em; background: #f8fafc; border-bottom: 1px solid #e5e7eb;">Unplugged</div>
{% highlight "javascript" %}
consume {
  customStores
} of '@web-states';

customStores.define(
  'user', UserStore
);
{% endhighlight %}
    </div>
</div>

{{ endContent() }}

<p class="text-sm text-gray-600 mt-4">
    See <a href="/projects/webstates/">Web States</a> for state management patterns.
</p>
