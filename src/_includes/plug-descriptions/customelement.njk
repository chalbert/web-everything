{% from "mode-selector.njk" import pluggedContent, unpluggedContent, comparisonContent, endContent %}

<h3 id="overview">Overview</h3>
<p>
    <strong>CustomElement</strong> is the base class for custom elements with enhanced lifecycle and options support.
</p>

<h3 id="interface">Interface</h3>
{% highlight "typescript" %}
abstract class CustomElement<Options = any> extends HTMLElement {
    // Instance Properties
    readonly options?: Options;

    // Standard Custom Element Lifecycle
    connectedCallback?(): void;
    disconnectedCallback?(): void;
    adoptedCallback?(): void;
    attributeChangedCallback?(
        name: string,
        oldValue: string | null,
        newValue: string | null
    ): void;

    // Static Configuration
    static readonly observedAttributes?: string[];
    static readonly formAssociated?: boolean;
}
{% endhighlight %}

<h3 id="key-features">Key Features</h3>
<ul class="list-disc ml-5 mb-4 text-sm text-gray-600">
    <li><strong>Options Support:</strong> Elements can be instantiated with configuration options</li>
    <li><strong>Proper Cloning:</strong> Options are preserved during cloneNode operations</li>
    <li><strong>Scoped Registries:</strong> Integrates with the scoped custom element registry system</li>
</ul>

<h3 id="usage-example">Usage Example</h3>

{{ pluggedContent("element-example", code=true) }}
{% highlight "javascript" %}
class MyComponent extends CustomElement {
    connectedCallback() {
        const variant = this.options?.variant || 'default';
        this.className = `component--${variant}`;
    }
}

// Register globally
customElements.define('my-component', MyComponent);

// Create with options
const component = new MyComponent({ variant: 'primary' });
{% endhighlight %}

{{ unpluggedContent("element-example", code=true) }}
{% highlight "javascript" %}
consume { CustomElement } of '@web-components';

class MyComponent extends CustomElement {
    connectedCallback() {
        const variant = this.options?.variant || 'default';
        this.className = `component--${variant}`;
    }
}

// Register globally
customElements.define('my-component', MyComponent);

// Create with options
const component = new MyComponent({ variant: 'primary' });
{% endhighlight %}

{{ comparisonContent("element-example", code=true) }}
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0;">
    <div>
        <div style="font-size: 0.7rem; font-weight: 600; color: #059669; padding: 0.5rem 1rem; text-transform: uppercase; letter-spacing: 0.05em; background: #f0fdf4; border-bottom: 1px solid #e5e7eb;">Plugged</div>
{% highlight "javascript" %}
// Global availability
class MyComp extends CustomElement {
  connectedCallback() {
    // ...
  }
}

customElements.define(
  'my-comp', MyComp
);
{% endhighlight %}
    </div>
    <div style="border-left: 1px solid #e5e7eb;">
        <div style="font-size: 0.7rem; font-weight: 600; color: #475569; padding: 0.5rem 1rem; text-transform: uppercase; letter-spacing: 0.05em; background: #f8fafc; border-bottom: 1px solid #e5e7eb;">Unplugged</div>
{% highlight "javascript" %}
consume {
  CustomElement
} of '@web-components';

class MyComp extends CustomElement {
  connectedCallback() {
    // ...
  }
}

customElements.define(
  'my-comp', MyComp
);
{% endhighlight %}
    </div>
</div>

{{ endContent() }}
